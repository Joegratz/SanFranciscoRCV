# SanFranciscoRCV
Analysis of San Francisco Ranked Choice Voting results published by the SF Department of Elections

This is a Python script intended to answer some statistical questions about how voters voted in San Francisco elections using ranked-choice voting ("RCV"). I am not an elections expert, and I don't claim that this tool is accurate; this is just intended to satisfy my curiosity and serve as a springboard for others.

The summary RCV results provided by the Department of Elections don't tell us anything about who the second and third choices were for those voters whose first choice was the winner or runner-up. That's because those choices don't make any difference to the outcome. But they're potentially interesting, and that data is derivable from the "ballot image" file published by the Department of Elections.

This tool derives that data from a "ballot image" file.

Here's example output (run on the 2018-06-18 report on the results of the 2018 San Francisco mayoral election):

```
== FIRST CHOICE VOTES BY WRITE-IN ANTOINE R. ROGERS VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 3 (100.0%)
MICHELLE BRAVO: 0 (0.0%)
LONDON BREED: 0 (0.0%)
MARK LENO: 0 (0.0%)
JANE KIM: 0 (0.0%)
RICHIE GREENBERG: 0 (0.0%)
ANGELA ALIOTO: 0 (0.0%)
AMY FARAH WEISS: 0 (0.0%)
ELLEN LEE ZHOU: 0 (0.0%)
WRITE-IN: 0 (0.0%)
== SECOND CHOICE VOTES BY WRITE-IN ANTOINE R. ROGERS VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 0 (0.0%)
MICHELLE BRAVO: 0 (0.0%)
LONDON BREED: 3 (100.0%)
MARK LENO: 0 (0.0%)
JANE KIM: 0 (0.0%)
RICHIE GREENBERG: 0 (0.0%)
ANGELA ALIOTO: 0 (0.0%)
AMY FARAH WEISS: 0 (0.0%)
ELLEN LEE ZHOU: 0 (0.0%)
WRITE-IN: 0 (0.0%)
== THIRD CHOICE VOTES BY WRITE-IN ANTOINE R. ROGERS VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 0 (0.0%)
MICHELLE BRAVO: 1 (33.3%)
LONDON BREED: 0 (0.0%)
MARK LENO: 0 (0.0%)
JANE KIM: 0 (0.0%)
RICHIE GREENBERG: 0 (0.0%)
ANGELA ALIOTO: 2 (66.7%)
AMY FARAH WEISS: 0 (0.0%)
ELLEN LEE ZHOU: 0 (0.0%)
WRITE-IN: 0 (0.0%)
=========================================================================
== FIRST CHOICE VOTES BY MICHELLE BRAVO VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 0 (0.0%)
MICHELLE BRAVO: 890 (100.0%)
LONDON BREED: 0 (0.0%)
MARK LENO: 0 (0.0%)
JANE KIM: 0 (0.0%)
RICHIE GREENBERG: 0 (0.0%)
ANGELA ALIOTO: 0 (0.0%)
AMY FARAH WEISS: 0 (0.0%)
ELLEN LEE ZHOU: 0 (0.0%)
WRITE-IN: 0 (0.0%)
== SECOND CHOICE VOTES BY MICHELLE BRAVO VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 0 (0.0%)
MICHELLE BRAVO: 82 (9.9%)
LONDON BREED: 117 (14.1%)
MARK LENO: 116 (14.0%)
JANE KIM: 89 (10.8%)
RICHIE GREENBERG: 76 (9.2%)
ANGELA ALIOTO: 180 (21.8%)
AMY FARAH WEISS: 59 (7.1%)
ELLEN LEE ZHOU: 108 (13.1%)
WRITE-IN: 0 (0.0%)
== THIRD CHOICE VOTES BY MICHELLE BRAVO VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 0 (0.0%)
MICHELLE BRAVO: 98 (12.3%)
LONDON BREED: 98 (12.3%)
MARK LENO: 131 (16.4%)
JANE KIM: 97 (12.2%)
RICHIE GREENBERG: 78 (9.8%)
ANGELA ALIOTO: 125 (15.7%)
AMY FARAH WEISS: 77 (9.7%)
ELLEN LEE ZHOU: 93 (11.7%)
WRITE-IN: 0 (0.0%)
=========================================================================
== FIRST CHOICE VOTES BY LONDON BREED VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 0 (0.0%)
MICHELLE BRAVO: 0 (0.0%)
LONDON BREED: 91,918 (100.0%)
MARK LENO: 0 (0.0%)
JANE KIM: 0 (0.0%)
RICHIE GREENBERG: 0 (0.0%)
ANGELA ALIOTO: 0 (0.0%)
AMY FARAH WEISS: 0 (0.0%)
ELLEN LEE ZHOU: 0 (0.0%)
WRITE-IN: 0 (0.0%)
== SECOND CHOICE VOTES BY LONDON BREED VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 5 (0.0%)
MICHELLE BRAVO: 1,049 (1.4%)
LONDON BREED: 6,435 (8.3%)
MARK LENO: 27,303 (35.4%)
JANE KIM: 20,024 (26.0%)
RICHIE GREENBERG: 2,209 (2.9%)
ANGELA ALIOTO: 15,199 (19.7%)
AMY FARAH WEISS: 1,750 (2.3%)
ELLEN LEE ZHOU: 3,173 (4.1%)
WRITE-IN: 0 (0.0%)
== THIRD CHOICE VOTES BY LONDON BREED VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 4 (0.0%)
MICHELLE BRAVO: 2,054 (3.2%)
LONDON BREED: 6,211 (9.6%)
MARK LENO: 16,723 (25.7%)
JANE KIM: 16,063 (24.7%)
RICHIE GREENBERG: 3,161 (4.9%)
ANGELA ALIOTO: 12,961 (19.9%)
AMY FARAH WEISS: 3,685 (5.7%)
ELLEN LEE ZHOU: 4,173 (6.4%)
WRITE-IN: 0 (0.0%)
=========================================================================
== FIRST CHOICE VOTES BY MARK LENO VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 0 (0.0%)
MICHELLE BRAVO: 0 (0.0%)
LONDON BREED: 0 (0.0%)
MARK LENO: 61,276 (100.0%)
JANE KIM: 0 (0.0%)
RICHIE GREENBERG: 0 (0.0%)
ANGELA ALIOTO: 0 (0.0%)
AMY FARAH WEISS: 0 (0.0%)
ELLEN LEE ZHOU: 0 (0.0%)
WRITE-IN: 0 (0.0%)
== SECOND CHOICE VOTES BY MARK LENO VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 0 (0.0%)
MICHELLE BRAVO: 355 (0.6%)
LONDON BREED: 15,532 (27.1%)
MARK LENO: 2,091 (3.6%)
JANE KIM: 30,685 (53.6%)
RICHIE GREENBERG: 1,127 (2.0%)
ANGELA ALIOTO: 5,589 (9.8%)
AMY FARAH WEISS: 993 (1.7%)
ELLEN LEE ZHOU: 924 (1.6%)
WRITE-IN: 0 (0.0%)
== THIRD CHOICE VOTES BY MARK LENO VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 3 (0.0%)
MICHELLE BRAVO: 1,227 (2.6%)
LONDON BREED: 13,672 (29.5%)
MARK LENO: 2,270 (4.9%)
JANE KIM: 10,366 (22.3%)
RICHIE GREENBERG: 1,456 (3.1%)
ANGELA ALIOTO: 9,653 (20.8%)
AMY FARAH WEISS: 5,672 (12.2%)
ELLEN LEE ZHOU: 2,095 (4.5%)
WRITE-IN: 0 (0.0%)
=========================================================================
== FIRST CHOICE VOTES BY JANE KIM VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 0 (0.0%)
MICHELLE BRAVO: 0 (0.0%)
LONDON BREED: 0 (0.0%)
MARK LENO: 0 (0.0%)
JANE KIM: 60,644 (100.0%)
RICHIE GREENBERG: 0 (0.0%)
ANGELA ALIOTO: 0 (0.0%)
AMY FARAH WEISS: 0 (0.0%)
ELLEN LEE ZHOU: 0 (0.0%)
WRITE-IN: 0 (0.0%)
== SECOND CHOICE VOTES BY JANE KIM VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 0 (0.0%)
MICHELLE BRAVO: 276 (0.5%)
LONDON BREED: 10,249 (17.5%)
MARK LENO: 40,440 (68.9%)
JANE KIM: 1,336 (2.3%)
RICHIE GREENBERG: 303 (0.5%)
ANGELA ALIOTO: 2,848 (4.9%)
AMY FARAH WEISS: 1,763 (3.0%)
ELLEN LEE ZHOU: 1,448 (2.5%)
WRITE-IN: 0 (0.0%)
== THIRD CHOICE VOTES BY JANE KIM VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 1 (0.0%)
MICHELLE BRAVO: 899 (1.8%)
LONDON BREED: 12,207 (24.4%)
MARK LENO: 8,512 (17.0%)
JANE KIM: 1,435 (2.9%)
RICHIE GREENBERG: 658 (1.3%)
ANGELA ALIOTO: 7,021 (14.1%)
AMY FARAH WEISS: 16,571 (33.2%)
ELLEN LEE ZHOU: 2,665 (5.3%)
WRITE-IN: 0 (0.0%)
=========================================================================
== FIRST CHOICE VOTES BY RICHIE GREENBERG VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 0 (0.0%)
MICHELLE BRAVO: 0 (0.0%)
LONDON BREED: 0 (0.0%)
MARK LENO: 0 (0.0%)
JANE KIM: 0 (0.0%)
RICHIE GREENBERG: 7,016 (100.0%)
ANGELA ALIOTO: 0 (0.0%)
AMY FARAH WEISS: 0 (0.0%)
ELLEN LEE ZHOU: 0 (0.0%)
WRITE-IN: 0 (0.0%)
== SECOND CHOICE VOTES BY RICHIE GREENBERG VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 1 (0.0%)
MICHELLE BRAVO: 224 (3.9%)
LONDON BREED: 1,061 (18.7%)
MARK LENO: 859 (15.1%)
JANE KIM: 364 (6.4%)
RICHIE GREENBERG: 686 (12.1%)
ANGELA ALIOTO: 1,563 (27.6%)
AMY FARAH WEISS: 256 (4.5%)
ELLEN LEE ZHOU: 658 (11.6%)
WRITE-IN: 0 (0.0%)
== THIRD CHOICE VOTES BY RICHIE GREENBERG VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 0 (0.0%)
MICHELLE BRAVO: 328 (6.9%)
LONDON BREED: 894 (18.8%)
MARK LENO: 711 (14.9%)
JANE KIM: 463 (9.7%)
RICHIE GREENBERG: 667 (14.0%)
ANGELA ALIOTO: 879 (18.4%)
AMY FARAH WEISS: 346 (7.3%)
ELLEN LEE ZHOU: 479 (10.0%)
WRITE-IN: 0 (0.0%)
=========================================================================
== FIRST CHOICE VOTES BY ANGELA ALIOTO VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 0 (0.0%)
MICHELLE BRAVO: 0 (0.0%)
LONDON BREED: 0 (0.0%)
MARK LENO: 0 (0.0%)
JANE KIM: 0 (0.0%)
RICHIE GREENBERG: 0 (0.0%)
ANGELA ALIOTO: 17,447 (100.0%)
AMY FARAH WEISS: 0 (0.0%)
ELLEN LEE ZHOU: 0 (0.0%)
WRITE-IN: 0 (0.0%)
== SECOND CHOICE VOTES BY ANGELA ALIOTO VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 0 (0.0%)
MICHELLE BRAVO: 499 (3.2%)
LONDON BREED: 4,638 (30.2%)
MARK LENO: 3,556 (23.1%)
JANE KIM: 2,135 (13.9%)
RICHIE GREENBERG: 1,410 (9.2%)
ANGELA ALIOTO: 1,589 (10.3%)
AMY FARAH WEISS: 599 (3.9%)
ELLEN LEE ZHOU: 939 (6.1%)
WRITE-IN: 0 (0.0%)
== THIRD CHOICE VOTES BY ANGELA ALIOTO VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 0 (0.0%)
MICHELLE BRAVO: 768 (5.7%)
LONDON BREED: 2,562 (18.9%)
MARK LENO: 2,816 (20.8%)
JANE KIM: 2,408 (17.8%)
RICHIE GREENBERG: 1,303 (9.6%)
ANGELA ALIOTO: 1,631 (12.1%)
AMY FARAH WEISS: 984 (7.3%)
ELLEN LEE ZHOU: 1,053 (7.8%)
WRITE-IN: 0 (0.0%)
=========================================================================
== FIRST CHOICE VOTES BY AMY FARAH WEISS VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 0 (0.0%)
MICHELLE BRAVO: 0 (0.0%)
LONDON BREED: 0 (0.0%)
MARK LENO: 0 (0.0%)
JANE KIM: 0 (0.0%)
RICHIE GREENBERG: 0 (0.0%)
ANGELA ALIOTO: 0 (0.0%)
AMY FARAH WEISS: 1,661 (100.0%)
ELLEN LEE ZHOU: 0 (0.0%)
WRITE-IN: 0 (0.0%)
== SECOND CHOICE VOTES BY AMY FARAH WEISS VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 0 (0.0%)
MICHELLE BRAVO: 84 (5.3%)
LONDON BREED: 185 (11.7%)
MARK LENO: 324 (20.5%)
JANE KIM: 571 (36.0%)
RICHIE GREENBERG: 87 (5.5%)
ANGELA ALIOTO: 172 (10.9%)
AMY FARAH WEISS: 56 (3.5%)
ELLEN LEE ZHOU: 105 (6.6%)
WRITE-IN: 0 (0.0%)
== THIRD CHOICE VOTES BY AMY FARAH WEISS VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 0 (0.0%)
MICHELLE BRAVO: 86 (5.7%)
LONDON BREED: 201 (13.2%)
MARK LENO: 541 (35.5%)
JANE KIM: 298 (19.6%)
RICHIE GREENBERG: 71 (4.7%)
ANGELA ALIOTO: 139 (9.1%)
AMY FARAH WEISS: 61 (4.0%)
ELLEN LEE ZHOU: 125 (8.2%)
WRITE-IN: 0 (0.0%)
=========================================================================
== FIRST CHOICE VOTES BY ELLEN LEE ZHOU VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 0 (0.0%)
MICHELLE BRAVO: 0 (0.0%)
LONDON BREED: 0 (0.0%)
MARK LENO: 0 (0.0%)
JANE KIM: 0 (0.0%)
RICHIE GREENBERG: 0 (0.0%)
ANGELA ALIOTO: 0 (0.0%)
AMY FARAH WEISS: 0 (0.0%)
ELLEN LEE ZHOU: 9,521 (100.0%)
WRITE-IN: 0 (0.0%)
== SECOND CHOICE VOTES BY ELLEN LEE ZHOU VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 0 (0.0%)
MICHELLE BRAVO: 190 (2.2%)
LONDON BREED: 2,371 (27.9%)
MARK LENO: 1,028 (12.1%)
JANE KIM: 1,213 (14.3%)
RICHIE GREENBERG: 1,016 (12.0%)
ANGELA ALIOTO: 1,692 (19.9%)
AMY FARAH WEISS: 252 (3.0%)
ELLEN LEE ZHOU: 739 (8.7%)
WRITE-IN: 0 (0.0%)
== THIRD CHOICE VOTES BY ELLEN LEE ZHOU VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 0 (0.0%)
MICHELLE BRAVO: 357 (4.6%)
LONDON BREED: 1,625 (21.0%)
MARK LENO: 1,213 (15.7%)
JANE KIM: 866 (11.2%)
RICHIE GREENBERG: 992 (12.8%)
ANGELA ALIOTO: 1,556 (20.1%)
AMY FARAH WEISS: 412 (5.3%)
ELLEN LEE ZHOU: 725 (9.4%)
WRITE-IN: 0 (0.0%)
=========================================================================
== FIRST CHOICE VOTES BY WRITE-IN VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 0 (0.0%)
MICHELLE BRAVO: 0 (0.0%)
LONDON BREED: 0 (0.0%)
MARK LENO: 0 (0.0%)
JANE KIM: 0 (0.0%)
RICHIE GREENBERG: 0 (0.0%)
ANGELA ALIOTO: 0 (0.0%)
AMY FARAH WEISS: 0 (0.0%)
ELLEN LEE ZHOU: 0 (0.0%)
WRITE-IN: 0 (0.0%)
== SECOND CHOICE VOTES BY WRITE-IN VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 0 (0.0%)
MICHELLE BRAVO: 0 (0.0%)
LONDON BREED: 0 (0.0%)
MARK LENO: 0 (0.0%)
JANE KIM: 0 (0.0%)
RICHIE GREENBERG: 0 (0.0%)
ANGELA ALIOTO: 0 (0.0%)
AMY FARAH WEISS: 0 (0.0%)
ELLEN LEE ZHOU: 0 (0.0%)
WRITE-IN: 0 (0.0%)
== THIRD CHOICE VOTES BY WRITE-IN VOTERS ==
WRITE-IN ANTOINE R. ROGERS: 0 (0.0%)
MICHELLE BRAVO: 0 (0.0%)
LONDON BREED: 0 (0.0%)
MARK LENO: 0 (0.0%)
JANE KIM: 0 (0.0%)
RICHIE GREENBERG: 0 (0.0%)
ANGELA ALIOTO: 0 (0.0%)
AMY FARAH WEISS: 0 (0.0%)
ELLEN LEE ZHOU: 0 (0.0%)
WRITE-IN: 0 (0.0%)
=========================================================================
```
